

[搭建教程](https://blog.csdn.net/l1028386804/article/details/79955325)


## 1 数据架构的主要概念
#### 1.1 索引
索引（index）是Elasticsearch对逻辑数据的逻辑存储，所以它可以分为更小的部分。你可以把
索引看成关系型数据库的表。然而，索引的结构是为快速有效的全文索引准备的，特别是它不存
储原始值。如果你知道MongoDB，可以把Elasticsearch的索引看成MongoDB里的一个集合。如果
你熟悉CouchDB，可以把索引看成CouchDB数据库索引。Elasticsearch可以把索引存放在一台机器
或者分散在多台服务器上，每个索引有一或多个分片（shard），每个分片可以有多个副本（replica）。

#### 1.2 文档
存储在Elasticsearch中的主要实体叫文档（document）。用关系型数据库来类比的话，一个文
档相当于数据库表中的一行记录。当比较Elasticsearch中的文档和MongoDB中的文档，你会发现
两者都可以有不同的结构，但Elasticsearch的文档中，相同字段必须有相同类型。这意味着，所
有包含 title 字段的文档， title 字段类型都必须一样，比如 string 。
文档由多个字段组成，每个字段可能多次出现在一个文档里，这样的字段叫多值字段
（multivalued）。每个字段有类型，如文本、数值、日期等。字段类型也可以是复杂类型，一个字
段包含其他子文档或者数组。字段类型在Elasticsearch中很重要，因为它给出了各种操作（如分
析或排序）如何被执行的信息。幸好，这可以自动确定，然而，我们仍然建议使用映射。与关系
型数据库不同，文档不需要有固定的结构，每个文档可以有不同的字段，此外，在程序开发期间，
不必确定有哪些字段。当然，可以用模式强行规定文档结构。从客户端的角度看，文档是一个JSON
对象。每个文档存储在一个
索引中并有一个Elasticsearch自动生成的唯一标识符和文档类型。文档需要有对应文档类型的唯
一标识符，这意味着在一个索引中，两个不同类型的文档可以有相同的唯一标识符。

#### 1.3 文档类型
在Elasticsearch中，一个索引对象可以存储很多不同用途的对象。例如，一个博客应用程序
可以保存文章和评论。文档类型让我们轻易地区分单个索引中的不同对象。每个文档可以有不同
的结构，但在实际部署中，将文件按类型区分对数据操作有很大帮助。当然，需要记住一个限制，
不同的文档类型不能为相同的属性设置不同的类型。例如，在同一索引中的所有文档类型中，一
个叫 title 的字段必须具有相同的类型。

#### 1.4 映射
在有关全文搜索基础知识部分，我们提到了分析的过程：为建索引和搜索准备输入文本。文
档中的每个字段都必须根据不同类型做相应的分析。举例来说，对数值字段和从网页抓取的文本
字段有不同的分析，比如前者的数字不应该按字母顺序排序，后者的第一步是忽略HTML标签，
因为它们是无用的信息噪音。Elasticsearch在映射中存储有关字段的信息。每一个文档类型都有
自己的映射，即使我们没有明确定义。

## 2 REST的架构

[rest介绍](https://en.wikipedia.org/wiki/Representational_state_transfer)



> 在一个类REST的架构中，每个请求都指向地址路径所表示的一个具体对象。如果/books/是
一个图书馆中图书列表的引用，/books/1则引用ID为1的那本书。注意这些对象可以嵌套，
/books/1/chapter/6表示图书馆的第一本书的第6章，等等。我们的API调用有个主题。我们想执行
的操作（比如 GET 或 POST 操作）怎么样？请求类型就是用来指定这个的。HTTP协议给出了可以
在API调用中用作动词的一组相当长的类型。合乎逻辑的选择是， GET 用来获得请求对象的当前
状态， POST 来改变对象的当前状态， PUT 创建一个对象，而 DELETE 销毁对象，另外还有个 HEAD
请求仅仅用来获取对象的基础信息。

        GET http://localhost:9000/ ：这个命令用来获取Elasticsearch的基本信息。

        GET http://localhost:9200/_cluster/state/nodes/ ：这个命令获取集群中节点
        的信息。
        POST http://localhost:9200/_cluster/nodes/_shutdown ：这个命令向集群中
      所有节点发送一个shutdown请求。
      
  ## curl 操作
  
  * 创建一个索引
  
  `curl -XPUT "http://localhost:9200/blog/"`
  
  * 插入一个文档
  
  * 查询文档
  
  `curl -XGET http://localhost:9200/blog/article/1`
  
  * 删除索引
  
  `curl -XDELETE "http://localhost:9200/blogs/"`
  
  ## 使用java操作elasticsearch
  
  
  
  
  
